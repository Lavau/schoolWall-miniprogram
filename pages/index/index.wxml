<!--pages/index/index.wxml-->
<view wx:if="{{list == null || list.length == 0}}" style="margin-top:50%; text-align:center;">
  {{tipText}}
</view>

<view wx:else class="container">
  <!-- 顶部文字 -->
  <view style="height: 40rpx;"></view>

  <!-- 顶部右侧固定的图标 -->
  <view class="header-right" bindtap="isShowTypeModal">
    <image src="/assets/img/icon/more.png" ></image>
  </view>

  <!-- 点击图标后，显示的模态框 -->
  <modal hidden="{{hidden}}" confirm-text="确定" no-cancel="true" bindconfirm="isShowTypeModal">
    <view class="modal">
      <view class="modal-item" bindtap="goToListEcardPage">一卡通</view>
      <view class="modal-item" bindtap="goToListOthersPage" data-typeId="4">失物招领</view>
      <view class="modal-item" bindtap="goToListOthersPage" data-typeId="6">脱单</view>
      <view class="modal-item" bindtap="goToListOthersPage" data-typeId="5">求助</view>
      <view class="modal-item" bindtap="goToListOthersPage" data-typeId="1">宣传栏</view>
      <view class="modal-item" bindtap="goToListOthersPage" data-typeId="3">吐槽/感谢</view>
    </view>
  </modal>

  <!-- 主题内容 -->
  <view wx:if="{{list == null}}" style="margin-top:50%; margin-bottom: 500%; text-align:center;">暂无数据</view>
  <view wx:else class="body">
    <block wx:for="{{list}}" wx:key="i">
      <!-- 一卡通 -->
      <view wx:if="{{item['typeId'] == 7}}" class="body-item-ecard" bindtap="goToDetailEcardPage" 
        data-id="{{item['id']}}">
        <view class="body-item-type">
          <image src="/assets/img/icon/lable.png"></image>
          <view class="body-item-type-word">一卡通认领</view>
        </view>

        <view>
          <span class="body-item-ecard-title">学院: </span>
          {{item['title']}}
        </view>
        <view>
          <span class="body-item-ecard-title">学号: </span
            >{{item['stuId']}}
        </view>
        <view>
          <span class="body-item-ecard-title">姓名: </span>
          {{item['description']}}
        </view>
      </view>

      <!-- 非一卡通部分（其他） -->
      <view wx:else class="body-item" bindtap="goToDetailOthersPage" 
          data-typeId="{{item['typeId']}}" data-id="{{item['id']}}">
        <!-- 图片 -->
        <view class="body-item-img" wx:if="{{item['pictureUrlList'].length != 0}}">
          <block wx:for="{{item['pictureUrlList']}}" wx:key="j">
            <image src="{{item}}" mode="aspectFill"></image> 
          </block>
        </view>

        <!-- 文字部分：优先展示描述 -->
        <view class="body-item-content">
          <text wx:if="{{item['description'].length != 0}}">{{item['description']}}</text>
          <text wx:else>{{item['title']}}</text>
        </view>

        <!-- 类型 -->
        <view class="body-item-type">
          <image src="/assets/img/icon/lable.png"></image>
          <!-- {{item['typeName']}} -->
          <view class="body-item-type-word"> {{item['typeName']}}</view>
        </view>

        <!-- item 最下面的内容 -->
        <view class="body-item-bottom">
          <image wx:if="{{item['anonymous']}}" class="body-item-bottom-avator" src="/assets/img/icon/user-unlogin.png"></image>
          <image wx:else class="body-item-bottom-avator" src="{{item['avatarUrl']}}"></image>
          <view wx:if="{{item['anonymous']}}" class="body-item-bottom-nickname">匿名</view>
          <view wx:else class="body-item-bottom-nickname">{{item['nickname']}}</view>

          <view class="body-item-bottom-right">
            <view class="body-item-bottom-view">{{item['viewNum']}}浏览</view>
            <view class="body-item-bottom-time">{{item['createTime']}}</view>
          </view>
        
        </view>
      </view>
    </block> 
  </view>

</view>